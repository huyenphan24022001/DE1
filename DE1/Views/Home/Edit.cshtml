@model DE1.Models.QLNen

@{
    ViewBag.Title = "Edit";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Chỉnh sửa</h2>

<div class="w3agile-validation w3ls-validation">
    <div class="panel panel-widget agile-validation">
        <div class="validation-grids widget-shadow" data-example-id="basic-forms">
            <div class="input-info">
                <h3>Thông tin nền :</h3>
            </div>
            <div class="form-body form-body-info">
                <form data-toggle="validator" novalidate="true" action="#" method="post">
                    <div class="form-group ">
                        <input type="text" class="form-control" id="TenNen" value="@Model.TenNen" name="TenNen" required="">
                    </div>
                    @{
                        List<String> s = new List<String>(Model.DienTich.Split("x".ToCharArray()));
                        string cd = s[0];
                        string cr = s[1].Substring(0, s[1].Length - 1);
                    }
                    <div class="form-group">
                        <input type="number" min="1" class="form-control" id="ChieuDai" placeholder="Chiều dài" name="ChieuDai" value="@cd" required="">

                    </div>
                    <div class="form-group">
                        <input type="number" min="1" data-toggle="validator" data-minlength="6" value="@cr" class="form-control" name="ChieuRong" id="ChieuRong" placeholder="Chiều rộng" required="">

                    </div>
                    <div class="form-group">
                        <input type="text" class="form-control" id="DiaChi" name="DiaChi" value="@Model.DiaChi" required="">
                        <div class="help-block with-errors"></div>
                    </div>
                    <div id="TinhTrang" class="form-group">
                        @if (Model.TinhTrang == true)
                        {
                            <div class="radio">

                                <label>
                                    <input checked type="radio" name="TinhTrang" value="true">
                                    Đã giao
                                </label>
                                <div class="radio">
                                    <label>
                                        <input type="radio" name="TinhTrang" value="false">
                                        Nền trống
                                    </label>
                                </div>
                            </div>
                        }
                        else
                        { <label>
                                <input type="radio" name="TinhTrang" value="true">
                                Đã giao
                            </label>
                            <div class="radio">
                                <label>
                                    <input type="radio" checked name="TinhTrang" value="false">
                                    Nền trống
                                </label>
                            </div>
                        }



                    </div>
                    @if (Model.TinhTrang == true)
                    {
                        <div id="ProfileUser">
                            <div class="input-info">
                                <h3>Thông tin người mua :</h3>
                            </div>
                            <div class="form-body form-body-info">
                                <div class="form-group">
                                    @Html.DropDownList("MaUsers", null, htmlAttributes: new { @class = "form-control" })
                                    @*<input type="text" class="form-control" id="FullName" value="@Model.FullName" name="FullName" required="" placeholder="Tên người mua">*@

                                </div>
                                @*<div class="form-group">
                                    <input type="number" data-toggle="validator" value="@Model.CCCD" data-minlength="12" data-maxlength="12" class="form-control" name="CCCD" id="CCCD" placeholder="CCCD" required="">
                                </div>
                                <div class="form-group">
                                    <input type="tel" data-toggle="validator" value="@Model.Phone" data-minlength="10" data-maxlength="10" class="form-control" id="Phone" name="Phone" placeholder="Phone" required="">
                                </div>*@

                            </div>
                        </div>
                    }
                    else
                    {
                        <div id="ProfileUser" style="display: none">
                            <div class="input-info">
                                <h3>Thông tin người mua :</h3>
                            </div>
                            <div class="form-body form-body-info">
                                <div class="form-group">
                                    @Html.DropDownList("MaUsers", null, htmlAttributes: new { @class = "form-control" })
                                    @*<input type="text" class="form-control" id="FullName" value="@Model.FullName" name="FullName" required="" placeholder="Tên người mua">*@

                                </div>
                                @*<div class="form-group">
                                    <input type="number" data-toggle="validator" value="@Model.CCCD" data-minlength="12" data-maxlength="12" class="form-control" name="CCCD" id="CCCD" placeholder="CCCD" required="">
                                </div>
                                <div class="form-group">
                                    <input type="tel" data-toggle="validator" value="@Model.Phone" data-minlength="10" data-maxlength="10" class="form-control" id="Phone" name="Phone" placeholder="Phone" required="">
                                </div>*@

                            </div>
                        </div>
                    }


                    <br />
                    <div class="bottom">

                        <div class="form-group">
                            <button type="submit" onclick="return checkday()" class="btn btn-primary ">Sửa</button>
                        </div>
                        <div class="clearfix"> </div>
                    </div>

                </form>
            </div>
        </div>
    </div>



</div>
<div>
    @Html.ActionLink("Back to List", "Index")
</div>
<script>
    var status = false;
    $('#TinhTrang').change(function () {
        // Get the value of the radio button with the specified ID
        var selectedValue = $('input[name="TinhTrang"]:checked').val();
        console.log(selectedValue)
        if (selectedValue == "true") {
            status = true;
            $("#ProfileUser").css("display", "block");

        } else {
            $("#ProfileUser").css("display", "none");
        }
    });

    function checkday(status) {
        if (status == true) {
            var CCCD = $("#CCCD").val();
            var Phone = $("#Phone").val();
            console.log(CCCD.length)
            if (CCCD.length != 12) {
                var text = "CCCD phải có 12 ký tự";
                window.location.href = "https://localhost:44329/Home/Error?MaError=" + text
                return false;
            }
            if (Phone.length != 10) {
                var text = "Phone phải có 10 ký tự";
                window.location.href = "https://localhost:44329/Home/Error?MaError=" + text
                return false;
            }
        }


        return true;
    }
</script>